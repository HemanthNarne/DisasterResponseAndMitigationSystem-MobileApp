<!--
  Generated template for the ReportDisasterPage page.

  Assigned to Chandra Mouli
-->
<!-- @author Chandra Mouli Kantipudi-->
<ion-header>

  <ion-navbar>
    <!-- Title of page Report form -->
    <ion-title color="primary">Report Form</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <form (submit)="onSubmit(reportForm)" #reportForm="ngForm">
    <ion-item no-lines>
      <ion-label color="primary">Please fill the below details</ion-label>
    </ion-item>
    <!-- <ion-item>
      <ion-label floating>ReportID</ion-label>
      <ion-input
        type="text"
        name="reportID"
        ngModel
        #reportID="ngModel"></ion-input>
    </ion-item> -->

    <ion-item>
      <ion-label>Report By</ion-label>
      <ion-input  name="reportedBy" value={{user}} ngModel #reportedBy="ngModel"
        readonly></ion-input>
    </ion-item>

    <ion-item>
      <ion-label >Incident &nbsp;&nbsp;</ion-label>
      <ion-input name="incidentName" value={{incidentClicked}}  ngModel  #incidentName="ngModel"
        readonly></ion-input>
    </ion-item>

    <ion-item><ion-label color="primary">Choose a file to upload <br></ion-label></ion-item>

    <ion-item>
        <ion-input type="file" name="files" ngModel (change)="onFileChange($event)" #files="ngModel" accept="file_extension"></ion-input>
      </ion-item>

    <!-- <ion-item>

        <ion-input  type="file"  name="files"  ngModel  #files="ngModel"
          accept="file_extension"></ion-input>
    </ion-item> -->

    <ion-item no-lines>
        <ion-icon name="camera" (click)="takePicture()"></ion-icon>
    </ion-item>

    <ion-item>
      <ion-label color="primary">GPS*</ion-label>
      <!-- Button to fetch gps coordinates should still work on the functionality -->
    </ion-item>
    <ion-item no-lines>
      <ion-icon name="locate" color="primary" (click)="getLocation()"> Click here to fetch current location</ion-icon>
    </ion-item>

        <ion-item>
            <ion-label>Latitude:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</ion-label>
            <ion-input
            value={{lat}}
            name="location.lat"
            ngModel
            #location.lat="ngModel"
            readonly></ion-input>
        </ion-item>

        <ion-item>
            <ion-label>Longitude:</ion-label>
            <ion-input name="location.lng" value={{lng}} ngModel #location.lng="ngModel"
            readonly></ion-input>
        </ion-item>



    <ion-item>
      <ion-label color="primary">
          Casualities*
          <!-- List of types of casualities are provided user have to provide number for each type -->
      </ion-label>
    </ion-item>
    <ion-list>
        <ion-item>
            <ion-label color="red" Fixed>Red</ion-label>
            <ion-input
              type="number"
              min=0
              placeholder="Enter number"
              name="casualties.red"
              ngModel
              #casualties.red="ngModel"
              pattern='[0-9]'
              required></ion-input>
              
        </ion-item>
        <ion-item no-lines>
          <ion-label>Implies "Requires immediate treatment"</ion-label>
        </ion-item>
        
        <ion-item>
            <ion-label color="yellow" Fixed>Yellow</ion-label>
            <ion-input
              type="number"
              min=0              
              placeholder="Enter number"
              name="casualties.yellow"
              ngModel
              #casualties.yellow="ngModel"
              pattern='[0-9]+'
              required></ion-input>
        </ion-item>
        <ion-item no-lines>
          <ion-label>Implies "Requires observation"</ion-label>
        </ion-item>
        <ion-item>
            <ion-label color="green" Fixed>Green</ion-label>
            <ion-input
              type="number"
              min=0              
              placeholder="Enter number"
              name="casualties.green"
              ngModel
              #casualties.green="ngModel"
              pattern='[0-9]+'
              required></ion-input>
        </ion-item>
        <ion-item no-lines>
          <ion-label>Implies "No or little wounded"</ion-label>
        </ion-item>
        <ion-item>
            <ion-label color="black" Fixed>Black</ion-label>
            <ion-input
              type="number"
              min=0              
              placeholder="Enter number"
              name="casualties.black"
              ngModel
              #casualties.black="ngModel"
              pattern='[0-9]+'
              required></ion-input>
        </ion-item>
        <ion-item no-lines>
          <ion-label>Implies "Number of people deceased"</ion-label>
        </ion-item>

        <!-- <ion-item no-lines>
          <p *ngIf="(reportForm.submitted || casualties.touched) && casualties.invalid" style="color: #ea6153;">
            <span *ngIf="casualties.errors.required">
              Please provide triage details
            </span>
            <span *ngIf="casualties.errors.pattern">
              Invaild pattern. Only numbers
            </span>
          </p>
        </ion-item> -->
    </ion-list>
   


    <ion-item>
        <ion-label color="primary">Structure Damage*</ion-label>
        <ion-select multiple="false"
        name="structuralDamage"
        ngModel
        #structuralDamage="ngModel"
        required>
          <ion-option>Low</ion-option>
          <ion-option>Medium</ion-option>
          <ion-option>High</ion-option>
          <ion-option>None</ion-option>
        </ion-select>
      </ion-item>
      <ion-item no-lines>
        <p *ngIf="(reportForm.submitted || structuralDamage.touched) && structuralDamage.invalid" style="color: #ea6153;">
          <span *ngIf="structuralDamage.errors.required">
            Please provide the level of structural damage
          </span>
          <span *ngIf="structuralDamage.errors.pattern">
            Invaild pattern. 
          </span>
        </p>
      </ion-item>

      <ion-item>
        <ion-label color="primary">Fire*</ion-label>
        <ion-select multiple="false"
        name="fire"
        ngModel
        #fire="ngModel"
        required>
          <ion-option>Low</ion-option>
          <ion-option>Medium</ion-option>
          <ion-option>High</ion-option>
          <ion-option>None</ion-option>
        </ion-select>
      </ion-item>
      <ion-item no-lines>
        <p *ngIf="(reportForm.submitted || fire.touched) && fire.invalid" style="color: #ea6153;">
          <span *ngIf="fire.errors.required">
            Please provide the level of fire intensity
          </span>
          <span *ngIf="fire.errors.pattern">
            Invaild pattern
          </span>
        </p>
      </ion-item>

      <!-- utilities -->
      <ion-item>
          <ion-label color="primary">Utilities*</ion-label>
          <ion-select multiple="false"
          name="utilities"
          ngModel
          #utilities="ngModel"
          required>
            <ion-option>Electricity</ion-option>
            <ion-option>Gas</ion-option>
            <ion-option>Chemical</ion-option>
            <ion-option>None</ion-option>
          </ion-select>
      </ion-item>
      <ion-item no-lines>
        <p *ngIf="(reportForm.submitted || utilities.touched) && utilities.invalid" style="color: #ea6153;">
          <span *ngIf="utilities.errors.required">
            Please provide details on utilities damaged
          </span>
          <span *ngIf="utilities.errors.pattern">
            Invaild pattern
          </span>
        </p>
      </ion-item>


      <ion-item>
        <ion-label floating>HazMat*</ion-label>
        <ion-input
          type="text"
          name="hazmat"
          ngModel
          #hazmat="ngModel"
          pattern='[a-z A-Z ]+'
          required></ion-input>
      </ion-item>
      <ion-item no-lines>
        <p *ngIf="(reportForm.submitted || hazmat.touched) && hazmat.invalid" style="color: #ea6153;">
          <span *ngIf="hazmat.errors.required">
            Please enter exploited hazardous materials
          </span>
          <span *ngIf="hazmat.errors.pattern">
            Invaild pattern
          </span>
        </p>
      </ion-item>

      <ion-item>
          <ion-label color="primary">Immediate rescue team needed*</ion-label>
          <ion-select multiple="false"
          name="rescueteam"
          ngModel
          #rescueteam="ngModel"
          required>
            <ion-option>Ambulance</ion-option>
            <ion-option>Fire Truck</ion-option>
            <ion-option>Police/Law</ion-option>
            <ion-option>All</ion-option>
            <ion-option>None</ion-option>
          </ion-select>
      </ion-item>
      <ion-item no-lines>
        <p *ngIf="(reportForm.submitted || rescueteam.touched) && rescueteam.invalid" style="color: #ea6153;">
          <span *ngIf="rescueteam.errors.required">
            Please provide details if any immediate <br>help needed
          </span>
          <span *ngIf="rescueteam.errors.pattern">
            Invaild pattern
          </span>
        </p>
      </ion-item>

      <ion-item>

          <ion-label floating>Additional information</ion-label>
          <ion-input
            type="text"
            name="others"
            ngModel
            #others="ngModel"
            ></ion-input>
        </ion-item>
        <!-- <ion-item no-lines>
          <p *ngIf="(reportForm.submitted || others.touched) && others.invalid" style="color: #ea6153;">
            <span *ngIf="others.errors.required">
              Please provide additional information<br> about the incident
            </span>
            <span *ngIf="others.errors.pattern">
              Invaild pattern
            </span>
          </p>
        </ion-item> -->

    <button ion-button block color="lightprimary" type="submit">Submit</button>
  </form>
</ion-content>

<iframe src="http://localhost:8200" allow="geolocation; microphone; camera"></iframe>
